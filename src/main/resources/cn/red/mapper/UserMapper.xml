<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.red.mapper.UserMapper">
	
	<select id="selectUidByEmailAndPassword" resultType="int">
		select uid from user where email = #{email} and password = #{password}
	</select>
	
	<select id="selectActived" resultType="int">
		select actived from user where email = #{email}
	</select>
	
	<select id="selectHeadUrl" resultType="String">
		select head_url from user where uid = #{uid}
	</select>
	
	<select id="selectUserByUid" resultType="cn.red.model.User">
		select uid,username,description,position,school,job,head_url,follow_count,follower_count,like_count,post_count,scan_count
        from user
        where uid=#{uid}
	</select>
	
	<select id="selectEmailCount" resultType="int">
		select count(*) from user where uid = #{uid}
	</select>
	
	<insert id="insertUser">
		insert into user(email,password,actived,activate_code,join_time,username,head_url)
        values(#{email},#{password},#{actived},#{activateCode},#{joinTime},#{username},#{headUrl})
	</insert>
	
	<update id="updateActived">
		update user set actived=1 where activate_code=#{activateCode}
	</update>
	
	<select id="selectEditInfo" resultType="cn.red.model.User">
		select uid,username,description,position,school,job
		from user
		where uid = #{uid}
	</select>
	
	<update id="updateUser">
		update user set username=#{username},description=#{description},position=#{position},school=#{school},job=#{job}
        where uid=#{uid}
	</update>
	
	<select id="selectPasswordByUid" resultType="String">
		select password from user where uid=#{uid}
	</select>
	
	<update id="updatePassword">
		update user set password=#{newPassword} where uid=#{uid}
	</update>
	
	<update id="updateHeadUrl">
		update user set head_url=#{headUrl} where uid=#{uid}
	</update>
	
</mapper>